<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
    <title>æˆ‘ - Minechat</title>
    <link rel="stylesheet" href="/styles.css" />
    <link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css" />
    <style>
      [v-cloak]{display:none}
      html,body{height:100%;overflow:hidden;overscroll-behavior:none}
      body{margin:0;padding:0;background:#f5f5f5}
      input,textarea,.el-input__inner,.el-textarea__inner{font-size:16px !important}
      .top-bar{position:fixed;top:0;left:0;right:0;height:50px;background:#fff;border-bottom:1px solid #e6e6e6;display:flex;align-items:center;justify-content:space-between;padding:0 12px;z-index:100}
      .content-area{position:fixed;top:50px;left:0;right:0;bottom:56px;overflow:auto;padding:12px;-webkit-overflow-scrolling:touch;overscroll-behavior:contain}
      .bottom-nav{position:fixed;bottom:0;left:0;right:0;height:56px;background:#fff;border-top:1px solid #e6e6e6;display:flex;justify-content:space-around;align-items:center;z-index:100}
      .nav-item{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;color:#666;font-size:12px;padding:4px;text-decoration:none}
      .nav-item.active{color:#409eff}
    </style>
  </head>
  <body>
    <div id="app" v-cloak>
      <div class="top-bar">
        <h3 style="margin:0">æˆ‘</h3>
        <el-button v-if="isLoggedIn" size="small" @click="logout">ç™»å‡º</el-button>
      </div>

      <div class="content-area">
        <el-card>
          <div style="display:flex;gap:16px;align-items:center;padding:12px">
            <el-avatar shape="square" :src="selfFaceUrl || ''" :size="64">{{ selfInitial }}</el-avatar>
            <div style="flex:1">
              <div style="font-size:18px;font-weight:600;margin-bottom:4px">{{ selfDisplayName }}</div>
              <div style="font-size:13px;color:#888">{{ selfIdHint }}</div>
            </div>
          </div>

          <el-divider></el-divider>

          <div style="padding:0 12px 12px">
            <el-button type="primary" :loading="updating" :disabled="!isLoggedIn || updating" @click="updateFace" style="width:100%;margin-bottom:8px">æ›´æ–°çš®è‚¤å¤´åƒ</el-button>
            <el-button type="default" @click="goEmojiManage" style="width:100%">ç®¡ç†è¡¨æƒ…åŒ…</el-button>
          </div>

          <div v-if="lastResult" style="margin-top:12px;padding:0 12px 12px">
            <el-alert type="success" :closable="false" show-icon title="æ›´æ–°æˆåŠŸ"></el-alert>
          </div>

          <div v-if="lastError" style="margin-top:12px;padding:0 12px 12px">
            <el-alert type="error" :closable="false" show-icon :title="lastError"></el-alert>
          </div>
        </el-card>
      </div>

      <div class="bottom-nav">
        <a href="/m/chats.html" class="nav-item">
          <span style="font-size:20px">ğŸ’¬</span>
          <span>ä¼šè¯</span>
        </a>
        <a href="/m/players.html" class="nav-item">
          <span style="font-size:20px">ğŸ‘¥</span>
          <span>ç©å®¶</span>
        </a>
        <a href="/m/me.html" class="nav-item active">
          <span style="font-size:20px">ğŸ‘¤</span>
          <span>æˆ‘</span>
        </a>
      </div>
    </div>

    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <script src="https://unpkg.com/element-plus/dist/index.full.js"></script>
    <script src="/m/me.js"></script>
    <script>
      document.addEventListener('gesturestart', function (e) { e.preventDefault(); }, { passive: false });
      document.addEventListener('gesturechange', function (e) { e.preventDefault(); }, { passive: false });
      document.addEventListener('gestureend', function (e) { e.preventDefault(); }, { passive: false });
    </script>
  </body>
</html>
